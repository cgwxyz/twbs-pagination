!function(t,s,i,a){"use strict";var e=t.fn.twbsPagination,o=function(s,i){if(this.$element=t(s),this.options=t.extend({},t.fn.twbsPagination.defaults,i),this.options.startPage=parseInt(this.options.startPage),isNaN(this.options.startPage))throw new Error("startPage option is not correct!");if(this.options.startPage<1&&(this.options.startPage=1),this.options.startPage>this.options.totalPages&&(this.options.startPage=this.options.totalPages),this.options.totalPages=parseInt(this.options.totalPages),isNaN(this.options.totalPages))throw new Error("Total pages option is not correct!");if(this.options.visiblePages=parseInt(this.options.visiblePages),isNaN(this.options.visiblePages))throw new Error("Visible pages option is not correct!");this.options.totalPages<this.options.visiblePages&&(this.options.visiblePages=this.options.totalPages),this.options.onPageClick instanceof Function&&this.$element.first().bind("page",this.options.onPageClick),this.makeBaseHref(),this.options.startPage<1&&(this.options.startPage=1),this.options.startPage>this.options.totalPages&&(this.options.startPage=this.options.totalPages);var a="function"==typeof this.$element.prop?this.$element.prop("tagName"):this.$element.attr("tagName");return this.$listContainer="UL"===a?this.$element:t("<ul></ul>"),this.$listContainer.addClass(this.options.paginationClass),"UL"!==a&&this.$element.append(this.$listContainer),this.render(this.getPages(this.options.startPage)),this.setupEvents(),this};o.prototype={constructor:o,destroy:function(){return this.$element.empty(),this.$element.removeData("twbs-pagination"),this.$element.unbind("page"),this},show:function(t){if(1>t||t>this.options.totalPages)throw new Error("Page is incorrect.");return this.render(this.getPages(t)),this.setupEvents(),this.$element.trigger("page",t),this},buildListItems:function(s){var i=t();if(i=i.add(this.buildItem("total",this.options.totalPages)),this.options.first&&(i=i.add(this.buildItem("first",1))),this.options.prev){var a=s.currentPage>1?s.currentPage-1:this.options.loop?this.options.totalPages:1;i=i.add(this.buildItem("prev",a))}for(var e=0;e<s.numeric.length;e++)i=i.add(this.buildItem("page",s.numeric[e]));if(this.options.next){var o=s.currentPage<this.options.totalPages?s.currentPage+1:this.options.loop?1:this.options.totalPages;i=i.add(this.buildItem("next",o))}return this.options.last&&(i=i.add(this.buildItem("last",this.options.totalPages))),i},buildItem:function(s,i){var a=t("<li></li>"),e=t("<a></a>"),o=null;switch(s){case"total":o=this.options.lang_total+this.options.totalPages,a.addClass(this.options.pageClass);break;case"page":o=i,a.addClass(this.options.pageClass);break;case"first":o=this.options.first,a.addClass(this.options.firstClass);break;case"prev":o=this.options.prev,a.addClass(this.options.prevClass);break;case"next":o=this.options.next,a.addClass(this.options.nextClass);break;case"last":o=this.options.last,a.addClass(this.options.lastClass)}return a.data("page",i),a.data("page-type",s),a.append(e.attr("href",this.makeHref(i)).html(o)),a},getPages:function(t){var s=[],i=Math.floor(this.options.visiblePages/2),a=t-i+1-this.options.visiblePages%2,e=t+i;0>=a&&(a=1,e=this.options.visiblePages),e>this.options.totalPages&&(a=this.options.totalPages-this.options.visiblePages+1,e=this.options.totalPages);for(var o=a;e>=o;)s.push(o),o++;return{currentPage:t,numeric:s}},render:function(s){this.$listContainer.children().remove(),this.$listContainer.append(this.buildListItems(s));var i=this.$listContainer.children();i.filter(function(){return"total"===t(this).data("page-type")}).toggleClass(this.options.disabledClass,1),i.filter(function(){return parseInt(t(this).data("page"))===parseInt(s.currentPage)&&"page"===t(this).data("page-type")}).addClass(this.options.activeClass),i.filter(function(){return"first"===t(this).data("page-type")}).toggleClass(this.options.disabledClass,1===s.currentPage),i.filter(function(){return"last"===t(this).data("page-type")}).toggleClass(this.options.disabledClass,s.currentPage===this.options.totalPages),i.filter(function(){return"prev"===t(this).data("page-type")}).toggleClass(this.options.disabledClass,!this.options.loop&&1===s.currentPage),i.filter(function(){return"next"===t(this).data("page-type")}).toggleClass(this.options.disabledClass,!this.options.loop&&s.currentPage===this.options.totalPages)},setupEvents:function(){var s=this;this.$listContainer.find("li").each(function(){var i=t(this);return i.off(),i.hasClass(s.options.disabledClass)||i.hasClass(s.options.activeClass)?void i.click(function(t){t.preventDefault()}):void i.click(function(){s.show(parseInt(i.data("page"),10))})})},makeBaseHref:function(){var t="^(.*)"+this.options.page_param+"\\=(\\-?\\d+)(.*)$",i=new RegExp(t),a=s.location.href.match(i);if("object"==typeof a&&null!==a)this.options.startPage=parseInt(a[2]),a[2]=this.options.page_param+"={{page_num}}",a.shift(),this.options.base_href=a.join("");else{this.options.startPage=1;var e=s.location.href.indexOf("?")>0?"&":"?";this.options.base_href=s.location.href+e+this.options.page_param+"={{page_num}}"}},makeHref:function(t){return this.options.base_href.replace("{{page_num}}",t)}},t.fn.twbsPagination=function(s){var i,e=Array.prototype.slice.call(arguments,1),n=t(this),r=n.data("twbs-pagination"),p="object"==typeof s&&s;return r||n.data("twbs-pagination",r=new o(this,p)),"string"==typeof s&&(i=r[s].apply(r,e)),i===a?n:i},t.fn.twbsPagination.defaults={totalPages:0,startPage:1,visiblePages:5,base_href:"",showTotal:!0,page_param:"page",lang_total:"Total:",lang_page:"pages",first:"First",prev:"Prev",next:"Next",last:"Last",loop:!1,onPageClick:null,paginationClass:"pagination",nextClass:"next",prevClass:"prev",lastClass:"last",firstClass:"first",pageClass:"page",activeClass:"active",disabledClass:"disabled"},t.fn.twbsPagination.Constructor=o,t.fn.twbsPagination.noConflict=function(){return t.fn.twbsPagination=e,this}}(jQuery,window,document);
